#! /usr/bin/env bash

# Enable advanced globbing
shopt -s globstar

preferences () {
    LANG='C.UTF-8' TIME_STYLE='long-iso' $1
}

_lhal () {
    ls -hal
}

lhal () {
    # List files with human readable sizes, even the hidden ones, the long way.
    preferences _lhal
}

_lha1 () {
    ls -ha1
}

lha1 () {
    # List files with human readable sizes, even the hidden ones,
    # the short way.
    preferences _lha1
}

randstring () {
    n="${1:-16}"
    nBytes="$(($n * 2))"
    head -"$nBytes" /dev/urandom | LC_ALL=c tr -dc 'a-zA-Z0-9\-\+\!' | fold -w "$n" | head -n 1
}

findex () {
    # Find paths in directory $1 matching the regex in $2
    # The regex should be enclosed in quotes to avoid globbing
    find ${1:?'Must set path'} \
        -regex ${2:?'Must set regex'} \
        -regextype posix-extended
}

pcd () {
    pushd $*
    cd $*
}

git config --global alias.logpo 'log --pretty=oneline'
git config --global alias.logshort 'log --pretty="format:%C(auto,yellow)%h%C(auto,magenta)% G? %C(auto,blue)%>(12,trunc)%ad %C(auto,green)%<(7,trunc)%aN%C(auto,reset)%s%C(auto,red)% gD% D" --date=short'
git config --global alias.s 'stage'
git config --global alias.cm 'commit -m'
git config --global alias.csm 'commit -S -m'
git config --global alias.sCm '!f() { git stage "${GIT_PREFIX}${1:?}" && git commit -m "${2:?}"; }; f'
